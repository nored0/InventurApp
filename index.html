<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="de"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="UTF-8" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;Fahrzeuginventur&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>body { font-family: sans-serif; padding: 20px; background: #f5f5f5; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>input, textarea, button, select { width: 100%; padding: 8px; margin: 5px 0; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.section { background: white; padding: 15px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.vehicle-entry { border-bottom: 1px solid #ccc; padding: 5px 0; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>#customStandort { display: none; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="section"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h2&gt;Neue Inventur anlegen&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;input type="text" id="username" placeholder="Ihr Name" required /&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;input type="date" id="inventurDate" required /&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;select id="standortDropdown" onchange="toggleCustomStandort()"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;option value=""&gt;Standort wählen&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;option value="Brückenstraße 6, Jena"&gt;Brückenstraße 6, Jena&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;option value="Damaschkeweg 65, Jena"&gt;Damaschkeweg 65, Jena&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;option value="Erfurter Str. 105, Apolda"&gt;Erfurter Str. 105, Apolda&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;option value="custom"&gt;Anderer Standort (bitte eingeben)&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;input type="text" id="customStandort" placeholder="Standort (frei eingeben)" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;button onclick="startInventur()"&gt;Inventur starten&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="section" id="vehicleSection" style="display:none"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h2&gt;Fahrzeug erfassen&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;input type="text" id="fahrzeugnummer" placeholder="Fahrzeugnummer" required /&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;textarea id="kommentar" placeholder="Kommentar (optional)"&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;button onclick="addVehicle()"&gt;+ Fahrzeug hinzufügen&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="section" id="listSection" style="display:none"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h2&gt;Erfasste Fahrzeuge&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="vehicleList"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;button onclick="exportCSV()"&gt;Daten exportieren und per E-Mail senden&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;button onclick="downloadCSV()"&gt;Nur herunterladen&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let inventur = null;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let vehicles = [];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>window.addEventListener('load', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const heute = new Date().toISOString().split('T')[0];</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.getElementById("inventurDate").value = heute;</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function toggleCustomStandort() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const dropdown = document.getElementById("standortDropdown");</p>
<p class="p1"><span class="Apple-converted-space">      </span>const customInput = document.getElementById("customStandort");</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (dropdown.value === "custom") {</p>
<p class="p1"><span class="Apple-converted-space">        </span>customInput.style.display = "block";</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>customInput.style.display = "none";</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function startInventur() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const name = document.getElementById("username").value.trim();</p>
<p class="p1"><span class="Apple-converted-space">      </span>const date = document.getElementById("inventurDate").value;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const dropdown = document.getElementById("standortDropdown");</p>
<p class="p1"><span class="Apple-converted-space">      </span>const custom = document.getElementById("customStandort").value.trim();</p>
<p class="p1"><span class="Apple-converted-space">      </span>let standort = "";</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (dropdown.value === "custom") {</p>
<p class="p1"><span class="Apple-converted-space">        </span>standort = custom;</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>standort = dropdown.value;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!name || !date || !standort) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>alert("Bitte Name, Datum und Standort eingeben.");</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>inventur = { name, date, standort };</p>
<p class="p1"><span class="Apple-converted-space">      </span>vehicles = [];</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.getElementById("vehicleSection").style.display = "block";</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.getElementById("listSection").style.display = "block";</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function addVehicle() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nummer = document.getElementById("fahrzeugnummer").value.trim();</p>
<p class="p1"><span class="Apple-converted-space">      </span>const kommentar = document.getElementById("kommentar").value.trim();</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!nummer) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>alert("Fahrzeugnummer ist erforderlich.");</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>const now = new Date().toISOString();</p>
<p class="p1"><span class="Apple-converted-space">      </span>vehicles.push({ nummer, kommentar, zeitstempel: now, nutzer: inventur.name });</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.getElementById("fahrzeugnummer").value = "";</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.getElementById("kommentar").value = "";</p>
<p class="p1"><span class="Apple-converted-space">      </span>renderList();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function renderList() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const list = document.getElementById("vehicleList");</p>
<p class="p1"><span class="Apple-converted-space">      </span>list.innerHTML = "";</p>
<p class="p1"><span class="Apple-converted-space">      </span>vehicles.forEach(v =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const div = document.createElement("div");</p>
<p class="p1"><span class="Apple-converted-space">        </span>div.className = "vehicle-entry";</p>
<p class="p1"><span class="Apple-converted-space">        </span>div.innerText = `${v.nummer} | ${v.zeitstempel} | ${v.kommentar}`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>list.appendChild(div);</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function generateCSV() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>let csv = "Fahrzeugnummer,Zeitstempel,Kommentar,Nutzername,Standort\n";</p>
<p class="p1"><span class="Apple-converted-space">      </span>vehicles.forEach(v =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>csv += `"${v.nummer}","${v.zeitstempel}","${v.kommentar}","${v.nutzer}","${inventur.standort}"\n`;</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">      </span>return csv;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function exportCSV() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!vehicles.length) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>alert("Keine Fahrzeuge erfasst.");</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>const csv = generateCSV();</p>
<p class="p1"><span class="Apple-converted-space">      </span>const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });</p>
<p class="p1"><span class="Apple-converted-space">      </span>const filename = `${inventur.date} Inventur.csv`;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const url = URL.createObjectURL(blob);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const mailto = `mailto:?subject=Inventur Export ${inventur.date}&amp;body=Im Anhang finden Sie die Inventur-Daten.\n\n${filename}`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const a = document.createElement("a");</p>
<p class="p1"><span class="Apple-converted-space">      </span>a.href = url;</p>
<p class="p1"><span class="Apple-converted-space">      </span>a.download = filename;</p>
<p class="p1"><span class="Apple-converted-space">      </span>a.style.display = "none";</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.body.appendChild(a);</p>
<p class="p1"><span class="Apple-converted-space">      </span>a.click();</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.body.removeChild(a);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>window.location.href = mailto;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}, 500);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function downloadCSV() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!vehicles.length) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>alert("Keine Fahrzeuge erfasst.");</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>const csv = generateCSV();</p>
<p class="p1"><span class="Apple-converted-space">      </span>const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });</p>
<p class="p1"><span class="Apple-converted-space">      </span>const filename = `${inventur.date} Inventur.csv`;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const url = URL.createObjectURL(blob);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const a = document.createElement("a");</p>
<p class="p1"><span class="Apple-converted-space">      </span>a.href = url;</p>
<p class="p1"><span class="Apple-converted-space">      </span>a.download = filename;</p>
<p class="p1"><span class="Apple-converted-space">      </span>a.style.display = "none";</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.body.appendChild(a);</p>
<p class="p1"><span class="Apple-converted-space">      </span>a.click();</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.body.removeChild(a);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
